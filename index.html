<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script defer src="/_vercel/insights/script.js"></script>
  <title>FoodTech - Accessible Food Delivery</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark sticky-top" style="background-color: #28a745;" role="navigation" aria-label="Main navigation">
    <div class="container">
      <a class="navbar-brand" href="#">FoodTech</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto me-3" role="menubar">
          <li class="nav-item" role="none">
            <a class="nav-link active" aria-current="page" href="#home" id="nav-home" role="menuitem" tabindex="0">Home</a>
          </li>
          <li class="nav-item" role="none">
            <a class="nav-link" href="#menu" id="nav-menu" role="menuitem" tabindex="0">Menu</a>
          </li>
          <li class="nav-item" role="none">
            <a class="nav-link" href="#specials" id="nav-specials" role="menuitem" tabindex="0">Specials</a>
          </li>
          <li class="nav-item" role="none">
            <a class="nav-link" href="#about" id="nav-about" role="menuitem" tabindex="0">About Us</a>
          </li>
          <li class="nav-item" role="none">
            <a class="nav-link" href="#contact" id="nav-contact" role="menuitem" tabindex="0">Contact</a>
          </li>
        </ul>

        <!-- Search Bar -->
        <form class="d-flex me-3" role="search" action="/search" method="GET">
          <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="query">
          <button class="btn btn-outline-light" type="submit">Search</button>
        </form>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section id="home">
    <header class="hero">
      <div class="container">
        <h1 class="display-4 fw-bold">Delicious Food at Your Fingertips</h1>
        <p class="lead">Order now and experience the future of food delivery!</p>
        <a href="#menu" class="btn btn-success btn-lg">Explore Menu</a>
      </div>
    </header>
  </section>

  <!-- Main Content -->
  <main id="main-content">
    <!-- Menu Section -->
    <section id="menu" class="py-5 bg-light">
      <div class="container">
        <h2 class="text-center mb-5">Our Menu</h2>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
          <div class="col">
            <div class="card h-100">
              <img src="https://images.unsplash.com/photo-1513104890138-7c749659a591" class="card-img-top" alt="Gourmet Burger">
              <div class="card-body">
                <h5 class="card-title">Gourmet Burger</h5>
                <p class="card-text">Juicy beef patty with fresh veggies and our secret sauce.</p>
                <p class="text-success fw-bold">$12.99</p>
              </div>
              <div class="card-footer">
                <button class="btn btn-success w-100" tabindex="0">Add to Cart</button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100">
              <img src="https://images.unsplash.com/photo-1604382354936-07c5d9983bd3" class="card-img-top" alt="Veggie Delight Salad">
              <div class="card-body">
                <h5 class="card-title">Veggie Delight Salad</h5>
                <p class="card-text">A mix of fresh greens, nuts, and tangy dressing.</p>
                <p class="text-success fw-bold">$9.99</p>
              </div>
              <div class="card-footer">
                <button class="btn btn-success w-100" tabindex="0">Add to Cart</button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100">
              <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ae38" class="card-img-top" alt="Margherita Pizza">
              <div class="card-body">
                <h5 class="card-title">Margherita Pizza</h5>
                <p class="card-text">Classic pizza with tomato, mozzarella, and basil.</p>
                <p class="text-success fw-bold">$14.99</p>
              </div>
              <div class="card-footer">
                <button class="btn btn-success w-100" tabindex="0">Add to Cart</button>
              </div>
            </div>
          </div>
        </div>  
      </div>
    </section>

    <!-- Cart Section -->
    <section id="cart" class="py-5">
      <div class="container">
        <h2 class="text-center mb-5">Your Cart</h2>
        <p class="text-center">Your cart is currently empty.</p>
      </div>
    </section>

    <!-- Specials Section -->
    <section id="specials" class="py-5">
      <div class="container">
        <h2 class="text-center mb-5">Specials</h2>
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
          <div class="col">
            <div class="card h-100">
              <img src="https://dinnerthendessert.com/wp-content/uploads/2023/07/Truffle-Pasta-14.jpg" class="card-img-top" alt="Truffle Pasta">
              <div class="card-body">
                <h5 class="card-title">Truffle Pasta</h5>
                <p class="card-text">Fresh pasta with truffle cream sauce and mushrooms.</p>
                <p class="text-success fw-bold">$18.99</p>
              </div>
              <div class="card-footer">
                <button class="btn btn-success w-100" tabindex="0">Add to Cart</button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100">
              <img src="https://images.unsplash.com/photo-1543353071-873f17a7a088" class="card-img-top" alt="Sushi Platter">
              <div class="card-body">
                <h5 class="card-title">Sushi Platter</h5>
                <p class="card-text">A variety of fresh sushi with soy sauce and wasabi.</p>
                <p class="text-success fw-bold">$29.99</p>
              </div>
              <div class="card-footer">
                <button class="btn btn-success w-100" tabindex="0">Add to Cart</button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="card h-100">
              <img src="https://www.shutterstock.com/image-photo/flavorful-grilled-ribeye-steak-buttery-260nw-2280033081.jpg" class="card-img-top" alt="Grilled Ribeye Steak">
              <div class="card-body">
                <h5 class="card-title">Grilled Ribeye Steak</h5>
                <p class="card-text">Perfectly grilled ribeye steak served with herb butter.</p>
                <p class="text-success fw-bold">$32.99</p>
              </div>
              <div class="card-footer">
                <button class="btn btn-success w-100" tabindex="0">Add to Cart</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Us Section -->
    <section id="about" class="py-5 bg-light">
      <div class="container">
        <h2 class="text-center mb-5">About Us</h2>
        <p class="text-center">At FoodTech, we believe in delivering high-quality meals right to your doorstep. Our team is dedicated to offering a wide variety of gourmet meals prepared by experienced chefs, ensuring that each meal brings joy and satisfaction. We are passionate about using fresh ingredients and delivering excellent customer service to make your dining experience memorable.</p>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-5">
      <div class="container">
        <h2 class="text-center mb-5">Contact Us</h2>
        <div class="row justify-content-center">
          <div class="col-md-8">
            <form id="contact-form">
              <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" placeholder="Your Name">
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" placeholder="Your Email">
              </div>
              <div class="mb-3">
                <label for="message" class="form-label">Message</label>
                <textarea class="form-control" id="message" rows="3" placeholder="Your message"></textarea>
              </div>
              <button type="submit" class="btn btn-success">Send Message</button>
            </form>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer Section -->
  <footer class="footer">
    <div class="container d-flex justify-content-center">
      <!-- Accessibility Buttons -->
      <div class="d-flex" role="group" aria-label="Accessibility controls">
        <button class="btn btn-outline-light me-2" id="increase-font" aria-label="Increase font size" tabindex="0">A+</button>
        <button class="btn btn-outline-light me-2" id="decrease-font" aria-label="Decrease font size" tabindex="0">A-</button>
        <button class="btn btn-outline-light" id="text-to-speech" aria-label="Read page aloud" tabindex="0">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-up" viewBox="0 0 16 16">
            <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>
            <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>
            <path d="M10.025 8a4.486 4.486 0 0 1-1.318 3.182L8 10.475A3.489 3.489 0 0 0 9.025 8c0-.966-.392-1.841-1.025-2.475l.707-.707A4.486 4.486 0 0 1 10.025 8zM7 4a.5.5 0 0 0-.812-.39L3.825 5.5H1.5A.5.5 0 0 0 1 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 7 12V4zM4.312 6.39 6 5.04v5.92L4.312 9.61A.5.5 0 0 0 4 9.5H2v-3h2a.5.5 0 0 0 .312-.11z"/>
          </svg>
        </button>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
  <script>
    document.getElementById('contact-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        message: document.getElementById('message').value
      };

      const response = fetch('https://food-ordering-api-azure.vercel.app/contactUs', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });
      });

      // Add click event listener to each button
      document.addEventListener('DOMContentLoaded', function() {
    // Get all "Add to Cart" buttons
    const addToCartButtons = document.querySelectorAll('.card .btn-success');

    // Add click event listener to each button
    addToCartButtons.forEach((button, index) => {
        button.addEventListener('click', async () => {
            try {
                const response = await fetch('https://food-ordering-api-azure.vercel.app/addToCart', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        itemId: index + 1, // Adding 1 because index starts at 0
                        cartId: 5,
                        userId: "7a954a6e-ed3e-4541-a5fc-a0b4e1888bfd"
                    })
                });

                if (response.ok) {
                    alert('Item added to cart successfully!');
                } else {
                    alert('Failed to add item to cart. Please try again.');
                }
            } catch (error) {
                alert('Error adding item to cart: ' + error.message);
            }
        });
    });
});

    // Text-to-Speech functionality
    const speak = (text) => {
      if ('speechSynthesis' in window) {
        speechSynthesis.cancel(); // Cancel any ongoing speech
        const utterance = new SpeechSynthesisUtterance(text);
        speechSynthesis.speak(utterance);
      }
    };

    // Function to read card content
    function readCardContent(button) {
      const card = button.closest('.card');
      if (card) {
        const title = card.querySelector('.card-title').textContent;
        const description = card.querySelector('.card-text').textContent;
        const price = card.querySelector('.text-success').textContent;
        const textToRead = `${title}. ${description}. Price: ${price}. Add to cart.`;
        speak(textToRead);
      }
    }

    document.getElementById('text-to-speech').addEventListener('click', function() {
      let textToRead = document.body.innerText;
      speak(textToRead);
    });

    // Stop speech when navigating to a new section
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        speechSynthesis.cancel();
      });
    });

    // Read out loud when an element receives focus
    document.body.addEventListener('focusin', function(e) {
      const target = e.target;
      let textToRead = '';

      if (target.tagName === 'A' || target.tagName === 'BUTTON') {
        if (target.textContent.trim() === 'Add to Cart') {
          readCardContent(target);
        } else {
          textToRead = target.textContent;
          speak(textToRead);
        }
      } else if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {
        textToRead = target.placeholder || target.value || target.name;
        speak(textToRead);
      }
    });

    // Font size adjustment
    let fontSize = 16;
    const minFontSize = 12;
    const maxFontSize = 40;

    document.getElementById('increase-font').addEventListener('click', function() {
      if (fontSize < maxFontSize) {
        fontSize += 2;
        document.body.style.fontSize = fontSize + 'px';
      }
    });

    document.getElementById('decrease-font').addEventListener('click', function() {
      if (fontSize > minFontSize) {
        fontSize -= 2;
        document.body.style.fontSize = fontSize + 'px';
      }
    });

    // Intersection Observer for navigation highlighting
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.navbar-nav .nav-link');

    const options = {
        threshold: 0.9,  // Trigger when 50% of the section is visible
        rootMargin: '-50px 0px -50px 0px'  // Adds a margin around the viewport
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Remove active class from all nav links
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    link.removeAttribute('aria-current');
                });
                
                // Add active class to corresponding nav link
                const currentId = `#${entry.target.id}`;
                const correspondingLink = document.querySelector(`.navbar-nav .nav-link[href="${currentId}"]`);
                if (correspondingLink) {
                    correspondingLink.classList.add('active');
                    correspondingLink.setAttribute('aria-current', 'page');
                }
            }
        });
    }, options);

    // Observe all sections
    sections.forEach(section => {
        observer.observe(section);
    });

    // Keyboard navigation for menu items
    const menuItems = document.querySelectorAll('.navbar-nav .nav-link');
    menuItems.forEach((item, index) => {
      item.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
          e.preventDefault();
          menuItems[(index + 1) % menuItems.length].focus();
        } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
          e.preventDefault();
          menuItems[(index - 1 + menuItems.length) % menuItems.length].focus();
        }
      });
    });

    // Font size keyboard shortcuts
    document.addEventListener('keydown', function(e) {
        if (e.altKey) {
            switch(e.key) {
                case '+':
                case '=': // Including = since it's the same key as + on most keyboards
                    e.preventDefault();
                    if (fontSize < maxFontSize) {
                        fontSize += 2;
                        document.body.style.fontSize = fontSize + 'px';
                    }
                    break;
                case '-':
                    e.preventDefault();
                    if (fontSize > minFontSize) {
                        fontSize -= 2;
                        document.body.style.fontSize = fontSize + 'px';
                    }
                    break;
            }
        }
    });

    // Keyboard shortcuts for navigation
    function updateActiveNavItem(sectionId) {
      document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
        link.classList.remove('active');
        link.removeAttribute('aria-current');
      });
      const activeLink = document.querySelector(`.navbar-nav .nav-link[href="${sectionId}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
        activeLink.setAttribute('aria-current', 'page');
      }
    }

    document.addEventListener('keydown', function(e) {
      if (e.altKey) {
        switch(e.key.toLowerCase()) {
          case 'h':
            e.preventDefault();
            document.querySelector('#home').scrollIntoView({behavior: 'smooth'});
            speak('Navigated to Home section');
            updateActiveNavItem('#home');
            break;
          case 'm':
            e.preventDefault();
            document.querySelector('#menu').scrollIntoView({behavior: 'smooth'});
            speak('Navigated to Menu section');
            updateActiveNavItem('#menu');
            break;
          case 'c':
            e.preventDefault();
            document.querySelector('#cart').scrollIntoView({behavior: 'smooth'});
            speak('Navigated to Cart section');
            updateActiveNavItem('#cart');
            break;
          case 's':
            e.preventDefault();
            document.querySelector('#specials').scrollIntoView({behavior: 'smooth'});
            speak('Navigated to Specials section');
            updateActiveNavItem('#specials');
            break;
          case 'a':
            e.preventDefault();
            document.querySelector('#about').scrollIntoView({behavior: 'smooth'});
            speak('Navigated to About Us section');
            updateActiveNavItem('#about');
            break;
          case 'o':
            e.preventDefault();
            document.querySelector('#contact').scrollIntoView({behavior: 'smooth'});
            speak('Navigated to Contact section');
            updateActiveNavItem('#contact');
            break;
        }
      }
    });

    // Focus trap
    function setupFocusTrap() {
      const focusableElements = 'a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])';
      const firstFocusableElement = document.querySelector(focusableElements);
      const focusableContent = document.querySelectorAll(focusableElements);
      const lastFocusableElement = focusableContent[focusableContent.length - 1];

      document.addEventListener('keydown', function(e) {
        let isTabPressed = e.key === 'Tab' || e.keyCode === 9;

        if (!isTabPressed) {
          return;
        }

        if (e.shiftKey) { // shift + tab
          if (document.activeElement === firstFocusableElement) {
            lastFocusableElement.focus();
            e.preventDefault();
          }
        } else { // tab
          if (document.activeElement === lastFocusableElement) {
            firstFocusableElement.focus();
            e.preventDefault();
          }
        }
      });
    }

    // Initialize focus trap
    setupFocusTrap();
  </script>
</body>
</html>